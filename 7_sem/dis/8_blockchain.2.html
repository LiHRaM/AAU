<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Blockchain Notes - Notes at Aalborg University</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../intro.html">Intro</a></li><li class="chapter-item affix "><a href="../../structure.html">Structure</a></li><li class="spacer"></li><li class="chapter-item "><a href="../../1_sem/index.html"><strong aria-hidden="true">1.</strong> Semester 1</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../1_sem/ip/index.html"><strong aria-hidden="true">1.1.</strong> Imperative Programming</a></li><li class="chapter-item "><a href="../../1_sem/la/index.html"><strong aria-hidden="true">1.2.</strong> Linear Algebra</a></li><li class="chapter-item "><a href="../../1_sem/pbl/index.html"><strong aria-hidden="true">1.3.</strong> Problem Based Learning</a></li></ol></li><li class="chapter-item "><a href="../../2_sem/index.html"><strong aria-hidden="true">2.</strong> Semester 2</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../2_sem/cart/index.html"><strong aria-hidden="true">2.1.</strong> Computer Architecture</a></li><li class="chapter-item "><a href="../../2_sem/dm/index.html"><strong aria-hidden="true">2.2.</strong> Discrete Mathematics</a></li><li class="chapter-item "><a href="../../2_sem/oop/index.html"><strong aria-hidden="true">2.3.</strong> Object Oriented Programming</a></li></ol></li><li class="chapter-item "><a href="../../3_sem/index.html"><strong aria-hidden="true">3.</strong> Semester 3</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../3_sem/ad/index.html"><strong aria-hidden="true">3.1.</strong> Algorithms and Datastructures</a></li><li class="chapter-item "><a href="../../3_sem/deb/index.html"><strong aria-hidden="true">3.2.</strong> Design and Evaluation of User Interfaces</a></li><li class="chapter-item "><a href="../../3_sem/su/index.html"><strong aria-hidden="true">3.3.</strong> System's Development</a></li></ol></li><li class="chapter-item "><a href="../../4_sem/index.html"><strong aria-hidden="true">4.</strong> Semester 4</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../4_sem/loc/index.html"><strong aria-hidden="true">4.1.</strong> Languages and Compilers</a></li><li class="chapter-item "><a href="../../4_sem/os/index.html"><strong aria-hidden="true">4.2.</strong> Principles of Operating Systems and Concurrency</a></li><li class="chapter-item "><a href="../../4_sem/ss/index.html"><strong aria-hidden="true">4.3.</strong> Syntax and Semantics</a></li></ol></li><li class="chapter-item "><a href="../../5_sem/index.html"><strong aria-hidden="true">5.</strong> Semester 5</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../5_sem/cc/index.html"><strong aria-hidden="true">5.1.</strong> Computability and Complexity</a></li><li class="chapter-item "><a href="../../5_sem/mi/index.html"><strong aria-hidden="true">5.2.</strong> Machine Intelligence</a></li><li class="chapter-item "><a href="../../5_sem/se/index.html"><strong aria-hidden="true">5.3.</strong> Software Engineering</a></li></ol></li><li class="chapter-item "><a href="../../6_sem/index.html"><strong aria-hidden="true">6.</strong> Semester 6</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../6_sem/aad/index.html"><strong aria-hidden="true">6.1.</strong> Advanced Algorithms and Datastructures</a></li><li class="chapter-item "><a href="../../6_sem/db/index.html"><strong aria-hidden="true">6.2.</strong> Database Systems</a></li><li class="chapter-item "><a href="../../6_sem/ts/index.html"><strong aria-hidden="true">6.3.</strong> Theory of Science</a></li></ol></li><li class="chapter-item expanded "><a href="../../7_sem/index.html"><strong aria-hidden="true">7.</strong> Semester 7</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../7_sem/dis/index.html"><strong aria-hidden="true">7.1.</strong> Distributed Systems</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../7_sem/dis/8_blockchain.2.html" class="active"><strong aria-hidden="true">7.1.1.</strong> Blockchain Notes</a></li></ol></li><li class="chapter-item "><a href="../../7_sem/pp/index.html"><strong aria-hidden="true">7.2.</strong> Programming Paradigms</a></li><li class="chapter-item "><a href="../../7_sem/tov/index.html"><strong aria-hidden="true">7.3.</strong> Test and Verification</a></li></ol></li><li class="chapter-item "><a href="../../8_sem/index.html"><strong aria-hidden="true">8.</strong> Semester 8</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../8_sem/sp/index.html"><strong aria-hidden="true">8.1.</strong> Selected Topics in Programming</a></li><li class="chapter-item "><a href="../../8_sem/wip/index.html"><strong aria-hidden="true">8.2.</strong> Web Information Processing</a></li><li class="chapter-item "><a href="../../8_sem/mdls/index.html"><strong aria-hidden="true">8.3.</strong> Mobile Data and Location-based Services</a></li><li class="chapter-item "><a href="../../8_sem/swi/index.html"><strong aria-hidden="true">8.4.</strong> Software Innovation</a></li><li class="chapter-item "><a href="../../8_sem/mhci/index.html"><strong aria-hidden="true">8.5.</strong> Mobile HCI</a></li></ol></li><li class="chapter-item "><a href="../../9_sem/index.html"><strong aria-hidden="true">9.</strong> Semester 9</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../9_sem/iret/index.html"><strong aria-hidden="true">9.1.</strong> IT Law</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../9_sem/iret/lec_1.html"><strong aria-hidden="true">9.1.1.</strong> Lecture 1</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_2.html"><strong aria-hidden="true">9.1.2.</strong> Lecture 2</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_3.html"><strong aria-hidden="true">9.1.3.</strong> Lecture 3</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_4.html"><strong aria-hidden="true">9.1.4.</strong> Lecture 4</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_5.html"><strong aria-hidden="true">9.1.5.</strong> Lecture 5</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_6.html"><strong aria-hidden="true">9.1.6.</strong> Lecture 6</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_7.html"><strong aria-hidden="true">9.1.7.</strong> Lecture 7</a></li><li class="chapter-item "><a href="../../9_sem/iret/lec_8.html"><strong aria-hidden="true">9.1.8.</strong> Lecture 8</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Notes at Aalborg University</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#cryptographical-tools" id="cryptographical-tools">Cryptographical Tools</a></h1>
<p>A summary of the tools necessary for Blockchains.</p>
<h2><a class="header" href="#hash" id="hash">Hash</a></h2>
<p>A hash function $H$ takes binary input of arbitrary length, and creates
fixed-length output of it.</p>
<p>$H: X = {0,1}^* \rightarrow {0,1}^L$<br />
typically where $L \in {128, 160, 256, 512}$</p>
<p>For security purposes, it is important that a small change in the input
results in a large change in the output. Collisions exist, but they are
hard to find with this property.</p>
<h2><a class="header" href="#signatures-using-asymmetric-cryptography" id="signatures-using-asymmetric-cryptography">Signatures using Asymmetric Cryptography</a></h2>
<p>Digital signatures are typically done using three algorithms, and a
known hash $H$.</p>
<h4><a class="header" href="#keygen" id="keygen">KeyGen</a></h4>
<p>An algorithm which returns two keys: a private signing key, and a public
verification key.</p>
<h4><a class="header" href="#sign" id="sign">Sign</a></h4>
<p>An algorithm which computes the signature of some input, given the
private key. This input is typically a hash of some data to be sent.</p>
<h4><a class="header" href="#verify" id="verify">Verify</a></h4>
<p>Decrypts the signature using the public key and compare the result with
the hash of the received data.</p>
<h2><a class="header" href="#merkle-trees" id="merkle-trees">Merkle Trees</a></h2>
<p>A complete binary tree of hashes. It is built starting from an initial
set of symbols. Also known as a hash tree. Explots a hash function H
(SHA1, MD5). Leaves are H applied to the initial symbols. Internal nodes
are H applied to the sons of a node.</p>
<h1><a class="header" href="#blockchain-basics" id="blockchain-basics">Blockchain Basics</a></h1>
<p>A blockchain is a digitized, decentralized, public ledger of all
cryptocurrency transactions. Constantly growing as 'mined' blocks (the
most recent transactions) are recorded and added to it in chronological
order, it allows market participants to keep track of digital currency
transactions without central recordkeeping <sup class="footnote-reference"><a href="#1">1</a></sup>. The Blockchain in
essence is a collection of Blocks. Each Block is composed of the
following elements: data, a hash pointer, and a timestamp.</p>
<h2><a class="header" href="#hash-pointers" id="hash-pointers">Hash Pointers</a></h2>
<p>Pointer to where some info is stored. Cryptographic hash of the info. If
we have a hash pointer, we can: (1) ask to get the info back, and (2)
verify that it hasn't changed. Similar to how programs to download are
often accompanied by a hash, to verify that you downloaded the correct
file.</p>
<h2><a class="header" href="#consensus" id="consensus">Consensus</a></h2>
<p>The Blockchain network is in principle completely asynchronous and
decentralized. In terms of currency, the problem to solve is
double-spending, i.e. being able to spend the same money more than once.</p>
<h4><a class="header" href="#nakamoto-consensus" id="nakamoto-consensus">Nakamoto Consensus</a></h4>
<p>Assuming that 1. most nodes are honest, and 2. adding a block is
computationally expensive, we can ignore received blockchains which are
shorter than ours, for two reasons: 1. it was created later than mine,
and 2. it can be out of sync. This assumes that the honest nodes have
more CPU power than attacker nodes.</p>
<h2><a class="header" href="#proof-of-work" id="proof-of-work">Proof of Work</a></h2>
<p>Provide a computational puzzle that is hard to solve when you want to
add a valid block, but easy to solve when you want to verify that a
block is valid. Specifically, the new block must be a combination of a
nonce and a header. The nonce is accepted when $H(\mathtt{header})$
starts with $n$ zeros. $n$ defines how hard it is to add a new block.</p>
<h4><a class="header" href="#example" id="example">Example</a></h4>
<p>Say the hashing algorithm is <code>SHA256</code>, and $n = 36$. Each nonce has the
probability $2^{-36}$ of success. The nonce must therefore be
brute-forced, but only requires one hash to verify.</p>
<h1><a class="header" href="#blockchain-details" id="blockchain-details">Blockchain Details</a></h1>
<h2><a class="header" href="#transactions" id="transactions">Transactions</a></h2>
<p>A transaction contains the following data:</p>
<ul>
<li>
<p>A list of input transactions</p>
</li>
<li>
<p>A list of tuples of the recipient public key, and the amount to
send.</p>
</li>
<li>
<p>Personal signature, signed with private key</p>
</li>
</ul>
<p>In order to verify a transaction, one must:</p>
<ol>
<li>
<p>Verify the signature using the public key of the sender</p>
</li>
<li>
<p>Verify the signatures of each of the input transactions</p>
</li>
<li>
<p>Ensure that the money has not been spent between the input
transactions and the new transaction.</p>
</li>
</ol>
<p>Since the transaction is signed using the private key, only the owner of
the identity can transfer the money from that point. A single user can
have an arbitrary amount of identities.</p>
<h2><a class="header" href="#user-miners" id="user-miners">User Miners</a></h2>
<p>A miner does the following:</p>
<ol>
<li>
<p>Verify all the transactions by looking that input transactions are
covered and properly signed</p>
</li>
<li>
<p>Compute the Merkle root hash for the transactions</p>
</li>
<li>
<p>Solve the puzzle on the previous block, for immutability</p>
</li>
<li>
<p>Broadcast the new header</p>
</li>
<li>
<p>Go on collecting new transactions for next block</p>
</li>
</ol>
<p>Miners receive compensation for computing the next block. However, it is
estimated that we waste $15 million / day on energy to power the
miners.</p>
<h2><a class="header" href="#smart-contracts" id="smart-contracts">Smart Contracts</a></h2>
<h4><a class="header" href="#definition" id="definition">Definition</a></h4>
<p>Computer protocols that facilitate, verify or enforce the negotiation or
performance of a contract, or that make a contractual clause
unnecessary. Define the rules and penalties around an agreement in the
same way that a traditional contract does, but also automatically
enforce those obligations, i.e. code is law.</p>
<h4><a class="header" href="#ethereum" id="ethereum">Ethereum</a></h4>
<p>Contracts are the main building blocks of Ethereum, the second most
popular blockchain. The contract is a program which lives inside the
distributed Ethereum network and has its own ether balance of Ether<sup class="footnote-reference"><a href="#2">2</a></sup>,
memory and code. Every time you send a transaction to a contract, it
executes its code, which can store data, send transactions and interact
with other contracts. In order to run the contract, you create a
transaction of Ether to the contract, optionally with some input
information. The contract runs until it completes or runs out of Ether.
The Ether paid is awarded to the winning miner. Each miner runs the
smart contract, and produces the same output. The winning miner will
publish the block to the rest of the network. Other miners validate that
they get the same result. The contracts may be compiled online using the
Solidity Compiler<sup class="footnote-reference"><a href="#3">3</a></sup>.</p>
<h1><a class="header" href="#summary" id="summary">Summary</a></h1>
<p>When to use blockchains:</p>
<ol>
<li>
<p>Are there multiple parties in the ecosystem?</p>
</li>
<li>
<p>Is establishing trust between all the parties an issue?</p>
</li>
<li>
<p>Is it critical to have a tamper-proof and permanent record of
transactions?</p>
</li>
<li>
<p>Are we securing the ownership or management of a finite resource?</p>
</li>
<li>
<p>Does this ecosystem benefit from improved transparency?</p>
</li>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Merkle tree</p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p>Ether is the cryptocurrency / cryptofuel of Ethereum</p>
</div>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../7_sem/dis/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../7_sem/pp/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../7_sem/dis/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../7_sem/pp/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../mermaid.min.js"></script>
        
        <script type="text/javascript" src="../../mermaid-init.js"></script>
        

        

    </body>
</html>
